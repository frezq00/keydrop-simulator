// vite.config.ts
import { sveltekit } from "file:///home/project/node_modules/@sveltejs/kit/src/exports/vite/index.js";
import path from "path";

// src/lib/server/wsDevServer.ts
import { PrismaClient as PrismaClient2 } from "file:///home/project/node_modules/@prisma/client/default.js";
import { randomInt } from "crypto";
import { Server } from "file:///home/project/node_modules/socket.io/wrapper.mjs";

// src/lib/server/dropToItem.ts
import { nanoid } from "file:///home/project/node_modules/nanoid/index.js";
function dropsToItems(drops, origin) {
  return drops.map((drop) => {
    return {
      dropId: nanoid(),
      origin,
      dropDate: /* @__PURE__ */ new Date(),
      globalInvItem: {
        connect: {
          id: drop.globalInvID
        }
      }
    };
  });
}

// src/lib/server/db.ts
import { PrismaClient } from "file:///home/project/node_modules/@prisma/client/default.js";
var prisma;
if (typeof window === "undefined") {
  if (process.env.NODE_ENV === "production") {
    prisma = new PrismaClient();
  } else {
    if (!global.prisma) {
      global.prisma = new PrismaClient();
    }
    prisma = global.prisma;
  }
}
var db = prisma;

// src/lib/server/parseCaseBattle.ts
async function parseCaseBattle(battle, parseDrops, parseWonItems) {
  const parsedBattle = battle;
  if (parseDrops) {
    const memo = /* @__PURE__ */ new Map();
    for (let i = 0; i < battle.playerCount; i++) {
      const parsedItems = [];
      const battleCaseDrops = battle.drops[i];
      for (const IDs of battleCaseDrops) {
        const items = [];
        for (const id of IDs) {
          if (memo.has(id)) {
            items.push(memo.get(id));
          } else {
            const item = await db.caseDrop.findFirst({
              where: { id }
            });
            memo.set(id, item);
            items.push(item);
          }
        }
        parsedItems.push(items);
      }
      parsedBattle.drops[i] = parsedItems;
    }
    memo.clear();
  } else if (parseWonItems) {
    for (let i = 0; i < battle.playerCount; i++) {
      const IDs = battle.wonItems[i];
      const items = await db.$transaction(
        IDs.map(
          (id) => db.caseDrop.findFirst({
            where: { id }
          })
        )
      );
      parsedBattle.wonItems[i] = items;
    }
  }
  return parsedBattle;
}

// src/lib/server/wsDevServer.ts
var bots = [
  {
    id: "0",
    username: "Bot 1",
    pfpUrl: "https://cdn.key-drop.com/battleBot/avatar1x.png",
    bot: true
  },
  {
    id: "2",
    username: "Bot 2",
    pfpUrl: "https://cdn.key-drop.com/battleBot/avatar2x.png",
    bot: true
  },
  {
    id: "3",
    username: "Bot 3",
    pfpUrl: "https://cdn.key-drop.com/battleBot/avatar3x.png",
    bot: true
  },
  {
    id: "4",
    username: "Bot 4",
    pfpUrl: "https://cdn.key-drop.com/battleBot/avatar4x.png",
    bot: true
  }
];
var webSocketServer = {
  name: "webSocketServer",
  configureServer(server) {
    const db2 = new PrismaClient2();
    const io = new Server(server.httpServer);
    setInterval(async () => {
      await db2.caseBattle.deleteMany({
        where: {
          createdAt: {
            lt: new Date((/* @__PURE__ */ new Date()).getTime() - 6e4 * 20)
          }
        }
      });
      const battles = await db2.caseBattle.findMany({
        where: {
          finished: false,
          public: true
        }
      }).catch(() => null);
      io.emit("caseBattleListUpdate", battles);
    }, 1e3);
    io.on("connection", async (socket) => {
      const _battleID = socket.request._query["battleID"];
      if (_battleID)
        socket.join(_battleID);
      socket.on("caseBattlePlayerJoin", async (battleID, userData, position) => {
        const battle = await db2.caseBattle.findUnique({
          where: {
            id: battleID
          },
          select: {
            players: true,
            playerCount: true,
            totalPrice: true,
            mode: true
          }
        });
        if (!battle || !battle.players)
          return;
        if (Object.values(battle.players).map((p) => p.id).includes(userData == null ? void 0 : userData.id))
          return;
        if (userData && userData.balance < battle.totalPrice) {
          socket.emit(
            "error",
            "toasts.error.header",
            "toasts.error.messages.notEnoughBalance",
            "error"
          );
          return;
        }
        if (battle.players[position]) {
          socket.emit("error", "toasts.error.header", "toasts.error.messages.spotTaken", "error");
          return;
        }
        battle.players[position] = userData ? { ...userData, bot: false } : bots[position];
        await db2.caseBattle.update({
          where: {
            id: battleID
          },
          data: {
            players: battle.players
          }
        });
        updatePlayers(io, battleID, battle.players);
        if (Object.values(battle.players).filter((v) => v).length === battle.playerCount) {
          const updatedBattle = await db2.caseBattle.update({
            where: {
              id: battleID
            },
            data: {
              finished: true
            }
          });
          const parsedBattle = await parseCaseBattle(updatedBattle, false, true);
          const playerStats = {};
          let allDrops = [];
          for (const [pos, user] of Object.entries(updatedBattle.players)) {
            if (!user.bot) {
              await db2.user.update({
                where: {
                  id: user.id
                },
                data: {
                  balance: {
                    decrement: updatedBattle.totalPrice
                  }
                }
              });
            }
            const intPos = parseInt(pos);
            const totalValue = parsedBattle.wonItems[intPos].reduce((t, d) => t += d.skinPrice, 0);
            playerStats[intPos] = {
              user,
              total: totalValue
            };
            allDrops = allDrops.concat(parsedBattle.wonItems[intPos]);
          }
          const keys = Object.keys(playerStats).map((str) => parseInt(str));
          const maxValue = Math.max(...keys.map((k) => playerStats[k].total));
          const minValue = Math.min(...keys.map((k) => playerStats[k].total));
          const compareVal = battle.mode === "underdog" ? minValue : maxValue;
          const winningValues = keys.filter((k) => playerStats[k].total === compareVal);
          const itemsToAdd = dropsToItems(allDrops, "CASE BATTLE");
          let winnerPos = winningValues[0];
          if (winningValues.length > 1)
            winnerPos = winningValues[randomInt(0, winningValues.length - 1)];
          if (!playerStats[winnerPos].user.bot) {
            await db2.user.update({
              where: {
                id: playerStats[winnerPos].user.id
              },
              data: {
                inventory: {
                  create: itemsToAdd
                }
              }
            });
          }
          await db2.caseBattle.update({
            where: {
              id: battleID
            },
            data: {
              winner: winnerPos
            }
          });
          io.to(battleID.toString()).emit("caseBattleStateChange", true, winnerPos);
          io.in(battleID.toString()).disconnectSockets();
        }
      });
      socket.on("caseBattlePlayerLeave", async (battleID, userData, position) => {
        var _a;
        const battle = await db2.caseBattle.findUnique({
          where: {
            id: battleID
          },
          select: {
            players: true,
            owner: true
          }
        });
        if (!battle || !battle.players)
          return;
        if (battle.owner === userData.id && Object.values(battle.players).length > 1) {
          const newOwnerID = (_a = Object.values(battle.players).find(
            (p) => p.id !== battle.owner && !p.bot
          )) == null ? void 0 : _a.id;
          if (!newOwnerID) {
            await db2.caseBattle.delete({
              where: {
                id: battleID
              }
            });
            io.to(battleID.toString()).emit("redirect", "case-battle/list");
            io.to(battleID.toString()).disconnectSockets();
            return;
          }
          await db2.caseBattle.update({
            where: {
              id: battleID
            },
            data: {
              owner: newOwnerID
            }
          });
          io.to(battleID.toString()).emit("caseBattleOwnerUpdate", newOwnerID);
        }
        battle.players[position] = void 0;
        await db2.caseBattle.update({
          where: {
            id: battleID
          },
          data: {
            players: battle.players
          }
        });
        updatePlayers(io, battleID, battle.players);
        if (Object.values(battle.players).filter((p) => p).length === 0) {
          await db2.caseBattle.delete({
            where: {
              id: battleID
            }
          });
          io.to(battleID.toString()).emit("redirect", "case-battle/list");
          io.in(battleID.toString()).disconnectSockets();
        }
      });
    });
  }
};
function updatePlayers(io, battleID, players) {
  io.to(battleID.toString()).emit("caseBattlePlayerUpdate", players);
}

// vite.config.ts
var config = {
  plugins: [sveltekit(), webSocketServer],
  resolve: {
    alias: {
      $components: path.resolve("src/components"),
      $static: path.resolve("static"),
      $assets: path.resolve("src/assets"),
      "$lib/server": path.resolve("src/lib/server")
    },
    preserveSymlinks: true
  },
  server: {
    fs: {
      allow: [".."]
    }
  }
};
var vite_config_default = config;
export {
  vite_config_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidml0ZS5jb25maWcudHMiLCAic3JjL2xpYi9zZXJ2ZXIvd3NEZXZTZXJ2ZXIudHMiLCAic3JjL2xpYi9zZXJ2ZXIvZHJvcFRvSXRlbS50cyIsICJzcmMvbGliL3NlcnZlci9kYi50cyIsICJzcmMvbGliL3NlcnZlci9wYXJzZUNhc2VCYXR0bGUudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCIvaG9tZS9wcm9qZWN0XCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCIvaG9tZS9wcm9qZWN0L3ZpdGUuY29uZmlnLnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9ob21lL3Byb2plY3Qvdml0ZS5jb25maWcudHNcIjtpbXBvcnQgeyBzdmVsdGVraXQgfSBmcm9tICdAc3ZlbHRlanMva2l0L3ZpdGUnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgdHlwZSB7IFVzZXJDb25maWcgfSBmcm9tICd2aXRlJztcbmltcG9ydCB7IHdlYlNvY2tldFNlcnZlciB9IGZyb20gJy4vc3JjL2xpYi9zZXJ2ZXIvd3NEZXZTZXJ2ZXIuanMnO1xuXG5jb25zdCBjb25maWc6IFVzZXJDb25maWcgPSB7XG4gIHBsdWdpbnM6IFtzdmVsdGVraXQoKSwgd2ViU29ja2V0U2VydmVyXSxcbiAgcmVzb2x2ZToge1xuICAgIGFsaWFzOiB7XG4gICAgICAkY29tcG9uZW50czogcGF0aC5yZXNvbHZlKCdzcmMvY29tcG9uZW50cycpLFxuICAgICAgJHN0YXRpYzogcGF0aC5yZXNvbHZlKCdzdGF0aWMnKSxcbiAgICAgICRhc3NldHM6IHBhdGgucmVzb2x2ZSgnc3JjL2Fzc2V0cycpLFxuICAgICAgJyRsaWIvc2VydmVyJzogcGF0aC5yZXNvbHZlKCdzcmMvbGliL3NlcnZlcicpXG4gICAgfSxcbiAgICBwcmVzZXJ2ZVN5bWxpbmtzOiB0cnVlXG4gIH0sXG4gIHNlcnZlcjoge1xuICAgIGZzOiB7XG4gICAgICBhbGxvdzogWycuLiddXG4gICAgfVxuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjb25maWc7XG4iLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIi9ob21lL3Byb2plY3Qvc3JjL2xpYi9zZXJ2ZXJcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIi9ob21lL3Byb2plY3Qvc3JjL2xpYi9zZXJ2ZXIvd3NEZXZTZXJ2ZXIudHNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL2hvbWUvcHJvamVjdC9zcmMvbGliL3NlcnZlci93c0RldlNlcnZlci50c1wiOy8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudCAqL1xuaW1wb3J0IHR5cGUge1xuICBDYXNlQmF0dGxlLFxuICBDYXNlQmF0dGxlQm90UGxheWVyLFxuICBDYXNlQmF0dGxlUGxheWVyLFxuICBDYXNlQmF0dGxlUGxheWVycyxcbiAgQ2FzZURyb3AsXG4gIFBhcnNlZENhc2VCYXR0bGUsXG4gIFRvYXN0UHJvcHNcbn0gZnJvbSAnJGxpYic7XG5pbXBvcnQgeyBQcmlzbWFDbGllbnQsIHR5cGUgVXNlciB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcbmltcG9ydCB7IHJhbmRvbUludCB9IGZyb20gJ2NyeXB0byc7XG5pbXBvcnQgeyBTZXJ2ZXIgfSBmcm9tICdzb2NrZXQuaW8nO1xuaW1wb3J0IHR5cGUgeyBQbHVnaW4gfSBmcm9tICd2aXRlJztcbmltcG9ydCB7IGRyb3BzVG9JdGVtcyB9IGZyb20gJy4vZHJvcFRvSXRlbSc7XG5pbXBvcnQgeyBwYXJzZUNhc2VCYXR0bGUgfSBmcm9tICcuL3BhcnNlQ2FzZUJhdHRsZSc7XG5cbmNvbnN0IGJvdHM6IENhc2VCYXR0bGVCb3RQbGF5ZXJbXSA9IFtcbiAge1xuICAgIGlkOiAnMCcsXG4gICAgdXNlcm5hbWU6ICdCb3QgMScsXG4gICAgcGZwVXJsOiAnaHR0cHM6Ly9jZG4ua2V5LWRyb3AuY29tL2JhdHRsZUJvdC9hdmF0YXIxeC5wbmcnLFxuICAgIGJvdDogdHJ1ZVxuICB9LFxuICB7XG4gICAgaWQ6ICcyJyxcbiAgICB1c2VybmFtZTogJ0JvdCAyJyxcbiAgICBwZnBVcmw6ICdodHRwczovL2Nkbi5rZXktZHJvcC5jb20vYmF0dGxlQm90L2F2YXRhcjJ4LnBuZycsXG4gICAgYm90OiB0cnVlXG4gIH0sXG4gIHtcbiAgICBpZDogJzMnLFxuICAgIHVzZXJuYW1lOiAnQm90IDMnLFxuICAgIHBmcFVybDogJ2h0dHBzOi8vY2RuLmtleS1kcm9wLmNvbS9iYXR0bGVCb3QvYXZhdGFyM3gucG5nJyxcbiAgICBib3Q6IHRydWVcbiAgfSxcbiAge1xuICAgIGlkOiAnNCcsXG4gICAgdXNlcm5hbWU6ICdCb3QgNCcsXG4gICAgcGZwVXJsOiAnaHR0cHM6Ly9jZG4ua2V5LWRyb3AuY29tL2JhdHRsZUJvdC9hdmF0YXI0eC5wbmcnLFxuICAgIGJvdDogdHJ1ZVxuICB9XG5dO1xuXG5leHBvcnQgY29uc3Qgd2ViU29ja2V0U2VydmVyOiBQbHVnaW4gPSB7XG4gIG5hbWU6ICd3ZWJTb2NrZXRTZXJ2ZXInLFxuICBjb25maWd1cmVTZXJ2ZXIoc2VydmVyKSB7XG4gICAgaW50ZXJmYWNlIFNlcnZlclRvQ2xpZW50RXZlbnRzIHtcbiAgICAgIGNhc2VCYXR0bGVMaXN0VXBkYXRlOiAoY2FzZUJhdHRsZXM6IENhc2VCYXR0bGVbXSkgPT4gdm9pZDtcbiAgICAgIGNhc2VCYXR0bGVQbGF5ZXJVcGRhdGU6IChwbGF5ZXJzOiBDYXNlQmF0dGxlUGxheWVycykgPT4gdm9pZDtcbiAgICAgIGNhc2VCYXR0bGVTdGF0ZUNoYW5nZTogKHN0YXRlOiBib29sZWFuLCB3aW5uZXJQb3M6IG51bWJlcikgPT4gdm9pZDtcbiAgICAgIGNhc2VCYXR0bGVPd25lclVwZGF0ZTogKG93bmVySUQ6IHN0cmluZykgPT4gdm9pZDtcbiAgICAgIHJlZGlyZWN0OiAodXJsOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgICBlcnJvcjogKGhlYWRlcjogc3RyaW5nLCBtZXNzYWdlS2V5OiBzdHJpbmcsIHR5cGU6IFRvYXN0UHJvcHNbJ3R5cGUnXSkgPT4gdm9pZDtcbiAgICB9XG5cbiAgICBpbnRlcmZhY2UgQ2xpZW50VG9TZXJ2ZXJFdmVudHMge1xuICAgICAgY2FzZUJhdHRsZVBsYXllckxlYXZlOiAoY2FzZUJhdHRsZUlEOiBudW1iZXIsIHVzZXJEYXRhOiBVc2VyLCBwb3NpdGlvbjogbnVtYmVyKSA9PiB2b2lkO1xuICAgICAgY2FzZUJhdHRsZVBsYXllckpvaW46IChcbiAgICAgICAgY2FzZUJhdHRsZUlEOiBudW1iZXIsXG4gICAgICAgIHVzZXJEYXRhOiBVc2VyIHwgbnVsbCxcbiAgICAgICAgcG9zaXRpb246IG51bWJlcixcbiAgICAgICAgaXNCb3Q6IGJvb2xlYW5cbiAgICAgICkgPT4gdm9pZDtcbiAgICAgIGNhc2VCYXR0bGVBZGRCb3Q6IChjYXNlQmF0dGxlSUQ6IG51bWJlciwgcG9zaXRpb246IG51bWJlcikgPT4gdm9pZDtcbiAgICAgIGNhc2VCYXR0bGVBZGRBbGxCb3RzOiAoY2FzZUJhdHRsZUlEOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgfVxuXG4gICAgaW50ZXJmYWNlIEludGVyU2VydmVyRXZlbnRzIHt9XG4gICAgaW50ZXJmYWNlIFNvY2tldERhdGEge31cblxuICAgIGNvbnN0IGRiID0gbmV3IFByaXNtYUNsaWVudCgpO1xuICAgIGNvbnN0IGlvID0gbmV3IFNlcnZlcjxcbiAgICAgIENsaWVudFRvU2VydmVyRXZlbnRzLFxuICAgICAgU2VydmVyVG9DbGllbnRFdmVudHMsXG4gICAgICBJbnRlclNlcnZlckV2ZW50cyxcbiAgICAgIFNvY2tldERhdGFcbiAgICA+KHNlcnZlci5odHRwU2VydmVyIGFzIGFueSk7XG5cbiAgICBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBkYi5jYXNlQmF0dGxlLmRlbGV0ZU1hbnkoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICAgICAgbHQ6IG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gNjBfMDAwICogMjApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgYmF0dGxlcyA9IGF3YWl0IGRiLmNhc2VCYXR0bGVcbiAgICAgICAgLmZpbmRNYW55KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgZmluaXNoZWQ6IGZhbHNlLFxuICAgICAgICAgICAgcHVibGljOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4gbnVsbCk7XG4gICAgICBpby5lbWl0KCdjYXNlQmF0dGxlTGlzdFVwZGF0ZScsIGJhdHRsZXMgYXMgYW55IGFzIENhc2VCYXR0bGVbXSk7XG4gICAgfSwgMV8wMDApO1xuXG4gICAgaW8ub24oJ2Nvbm5lY3Rpb24nLCBhc3luYyAoc29ja2V0KSA9PiB7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBjb25zdCBfYmF0dGxlSUQ6IHN0cmluZyA9IHNvY2tldC5yZXF1ZXN0Ll9xdWVyeVsnYmF0dGxlSUQnXTtcblxuICAgICAgaWYgKF9iYXR0bGVJRCkgc29ja2V0LmpvaW4oX2JhdHRsZUlEKTtcbiAgICAgIHNvY2tldC5vbignY2FzZUJhdHRsZVBsYXllckpvaW4nLCBhc3luYyAoYmF0dGxlSUQsIHVzZXJEYXRhLCBwb3NpdGlvbikgPT4ge1xuICAgICAgICBjb25zdCBiYXR0bGU6IENhc2VCYXR0bGUgPSAoYXdhaXQgZGIuY2FzZUJhdHRsZS5maW5kVW5pcXVlKHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgaWQ6IGJhdHRsZUlEXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgIHBsYXllcnM6IHRydWUsXG4gICAgICAgICAgICBwbGF5ZXJDb3VudDogdHJ1ZSxcbiAgICAgICAgICAgIHRvdGFsUHJpY2U6IHRydWUsXG4gICAgICAgICAgICBtb2RlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9KSkgYXMgYW55O1xuXG4gICAgICAgIGlmICghYmF0dGxlIHx8ICFiYXR0bGUucGxheWVycykgcmV0dXJuO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgT2JqZWN0LnZhbHVlcyhiYXR0bGUucGxheWVycylcbiAgICAgICAgICAgIC5tYXAoKHApID0+IHAuaWQpXG4gICAgICAgICAgICAuaW5jbHVkZXModXNlckRhdGE/LmlkKVxuICAgICAgICApXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAodXNlckRhdGEgJiYgdXNlckRhdGEuYmFsYW5jZSA8IGJhdHRsZS50b3RhbFByaWNlKSB7XG4gICAgICAgICAgc29ja2V0LmVtaXQoXG4gICAgICAgICAgICAnZXJyb3InLFxuICAgICAgICAgICAgJ3RvYXN0cy5lcnJvci5oZWFkZXInLFxuICAgICAgICAgICAgJ3RvYXN0cy5lcnJvci5tZXNzYWdlcy5ub3RFbm91Z2hCYWxhbmNlJyxcbiAgICAgICAgICAgICdlcnJvcidcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYmF0dGxlLnBsYXllcnNbcG9zaXRpb25dKSB7XG4gICAgICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywgJ3RvYXN0cy5lcnJvci5oZWFkZXInLCAndG9hc3RzLmVycm9yLm1lc3NhZ2VzLnNwb3RUYWtlbicsICdlcnJvcicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBiYXR0bGUucGxheWVyc1twb3NpdGlvbl0gPSB1c2VyRGF0YSA/IHsgLi4udXNlckRhdGEsIGJvdDogZmFsc2UgfSA6IGJvdHNbcG9zaXRpb25dO1xuICAgICAgICBhd2FpdCBkYi5jYXNlQmF0dGxlLnVwZGF0ZSh7XG4gICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIGlkOiBiYXR0bGVJRFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgcGxheWVyczogYmF0dGxlLnBsYXllcnMgYXMgYW55XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB1cGRhdGVQbGF5ZXJzKGlvLCBiYXR0bGVJRCwgYmF0dGxlLnBsYXllcnMgYXMgYW55IGFzIENhc2VCYXR0bGVQbGF5ZXJzKTtcblxuICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhiYXR0bGUucGxheWVycykuZmlsdGVyKCh2KSA9PiB2KS5sZW5ndGggPT09IGJhdHRsZS5wbGF5ZXJDb3VudCkge1xuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRCYXR0bGU6IENhc2VCYXR0bGUgPSAoYXdhaXQgZGIuY2FzZUJhdHRsZS51cGRhdGUoe1xuICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgaWQ6IGJhdHRsZUlEXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBmaW5pc2hlZDogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pKSBhcyBhbnk7XG5cbiAgICAgICAgICBjb25zdCBwYXJzZWRCYXR0bGU6IFBhcnNlZENhc2VCYXR0bGUgPSBhd2FpdCBwYXJzZUNhc2VCYXR0bGUodXBkYXRlZEJhdHRsZSwgZmFsc2UsIHRydWUpO1xuXG4gICAgICAgICAgY29uc3QgcGxheWVyU3RhdHM6IHtcbiAgICAgICAgICAgIFtrZXk6IG51bWJlcl06IHsgdG90YWw6IG51bWJlcjsgdXNlcjogQ2FzZUJhdHRsZUJvdFBsYXllciB8IENhc2VCYXR0bGVQbGF5ZXIgfTtcbiAgICAgICAgICB9ID0ge307XG4gICAgICAgICAgbGV0IGFsbERyb3BzOiBDYXNlRHJvcFtdID0gW107XG4gICAgICAgICAgLy8gcHJldHRpZXItaWdub3JlXG4gICAgICAgICAgZm9yIChjb25zdCBbcG9zLCB1c2VyXSBvZiBPYmplY3QuZW50cmllcyh1cGRhdGVkQmF0dGxlLnBsYXllcnMgYXMgYW55IGFzIENhc2VCYXR0bGVQbGF5ZXJzKSkge1xuICAgICAgICAgICAgaWYgKCF1c2VyLmJvdCkge1xuICAgICAgICAgICAgICBhd2FpdCBkYi51c2VyLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICAgIGlkOiB1c2VyLmlkXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICBiYWxhbmNlOiB7XG4gICAgICAgICAgICAgICAgICAgIGRlY3JlbWVudDogdXBkYXRlZEJhdHRsZS50b3RhbFByaWNlXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgaW50UG9zID0gcGFyc2VJbnQocG9zKTtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsVmFsdWUgPSBwYXJzZWRCYXR0bGUud29uSXRlbXNbaW50UG9zXS5yZWR1Y2UoKHQsIGQpID0+IHQgKz0gZC5za2luUHJpY2UsIDApO1xuICAgICAgICAgICAgcGxheWVyU3RhdHNbaW50UG9zXSA9IHtcbiAgICAgICAgICAgICAgdXNlcjogdXNlcixcbiAgICAgICAgICAgICAgdG90YWw6IHRvdGFsVmFsdWUgXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYWxsRHJvcHMgPSBhbGxEcm9wcy5jb25jYXQocGFyc2VkQmF0dGxlLndvbkl0ZW1zW2ludFBvc10pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocGxheWVyU3RhdHMpLm1hcCgoc3RyKSA9PiBwYXJzZUludChzdHIpKTtcbiAgICAgICAgICBjb25zdCBtYXhWYWx1ZSA9IE1hdGgubWF4KC4uLmtleXMubWFwKChrKSA9PiBwbGF5ZXJTdGF0c1trXS50b3RhbCkpO1xuICAgICAgICAgIGNvbnN0IG1pblZhbHVlID0gTWF0aC5taW4oLi4ua2V5cy5tYXAoKGspID0+IHBsYXllclN0YXRzW2tdLnRvdGFsKSk7XG4gICAgICAgICAgY29uc3QgY29tcGFyZVZhbCA9IGJhdHRsZS5tb2RlID09PSAndW5kZXJkb2cnID8gbWluVmFsdWUgOiBtYXhWYWx1ZTtcbiAgICAgICAgICBjb25zdCB3aW5uaW5nVmFsdWVzID0ga2V5cy5maWx0ZXIoKGspID0+IHBsYXllclN0YXRzW2tdLnRvdGFsID09PSBjb21wYXJlVmFsKTtcbiAgICAgICAgICBjb25zdCBpdGVtc1RvQWRkID0gZHJvcHNUb0l0ZW1zKGFsbERyb3BzLCAnQ0FTRSBCQVRUTEUnKTtcbiAgICAgICAgICBsZXQgd2lubmVyUG9zID0gd2lubmluZ1ZhbHVlc1swXTtcblxuICAgICAgICAgIGlmICh3aW5uaW5nVmFsdWVzLmxlbmd0aCA+IDEpXG4gICAgICAgICAgICB3aW5uZXJQb3MgPSB3aW5uaW5nVmFsdWVzW3JhbmRvbUludCgwLCB3aW5uaW5nVmFsdWVzLmxlbmd0aCAtIDEpXTtcblxuICAgICAgICAgIGlmICghcGxheWVyU3RhdHNbd2lubmVyUG9zXS51c2VyLmJvdCkge1xuICAgICAgICAgICAgYXdhaXQgZGIudXNlci51cGRhdGUoe1xuICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgIGlkOiBwbGF5ZXJTdGF0c1t3aW5uZXJQb3NdLnVzZXIuaWRcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGludmVudG9yeToge1xuICAgICAgICAgICAgICAgICAgY3JlYXRlOiBpdGVtc1RvQWRkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBhd2FpdCBkYi5jYXNlQmF0dGxlLnVwZGF0ZSh7XG4gICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICBpZDogYmF0dGxlSURcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIHdpbm5lcjogd2lubmVyUG9zXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpby50byhiYXR0bGVJRC50b1N0cmluZygpKS5lbWl0KCdjYXNlQmF0dGxlU3RhdGVDaGFuZ2UnLCB0cnVlLCB3aW5uZXJQb3MpO1xuICAgICAgICAgIGlvLmluKGJhdHRsZUlELnRvU3RyaW5nKCkpLmRpc2Nvbm5lY3RTb2NrZXRzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBzb2NrZXQub24oJ2Nhc2VCYXR0bGVQbGF5ZXJMZWF2ZScsIGFzeW5jIChiYXR0bGVJRCwgdXNlckRhdGEsIHBvc2l0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IGJhdHRsZSA9IGF3YWl0IGRiLmNhc2VCYXR0bGUuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIGlkOiBiYXR0bGVJRFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBwbGF5ZXJzOiB0cnVlLFxuICAgICAgICAgICAgb3duZXI6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghYmF0dGxlIHx8ICFiYXR0bGUucGxheWVycykgcmV0dXJuO1xuXG4gICAgICAgIGlmIChiYXR0bGUub3duZXIgPT09IHVzZXJEYXRhLmlkICYmIE9iamVjdC52YWx1ZXMoYmF0dGxlLnBsYXllcnMpLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICBjb25zdCBuZXdPd25lcklEID0gT2JqZWN0LnZhbHVlcyhiYXR0bGUucGxheWVycykuZmluZChcbiAgICAgICAgICAgIChwKSA9PiBwLmlkICE9PSBiYXR0bGUub3duZXIgJiYgIXAuYm90XG4gICAgICAgICAgKT8uaWQ7XG4gICAgICAgICAgaWYgKCFuZXdPd25lcklEKSB7XG4gICAgICAgICAgICBhd2FpdCBkYi5jYXNlQmF0dGxlLmRlbGV0ZSh7XG4gICAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgaWQ6IGJhdHRsZUlEXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaW8udG8oYmF0dGxlSUQudG9TdHJpbmcoKSkuZW1pdCgncmVkaXJlY3QnLCAnY2FzZS1iYXR0bGUvbGlzdCcpO1xuICAgICAgICAgICAgaW8udG8oYmF0dGxlSUQudG9TdHJpbmcoKSkuZGlzY29ubmVjdFNvY2tldHMoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYXdhaXQgZGIuY2FzZUJhdHRsZS51cGRhdGUoe1xuICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgaWQ6IGJhdHRsZUlEXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBvd25lcjogbmV3T3duZXJJRFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlvLnRvKGJhdHRsZUlELnRvU3RyaW5nKCkpLmVtaXQoJ2Nhc2VCYXR0bGVPd25lclVwZGF0ZScsIG5ld093bmVySUQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBiYXR0bGUucGxheWVyc1twb3NpdGlvbl0gPSB1bmRlZmluZWQ7XG4gICAgICAgIGF3YWl0IGRiLmNhc2VCYXR0bGUudXBkYXRlKHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgaWQ6IGJhdHRsZUlEXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBwbGF5ZXJzOiBiYXR0bGUucGxheWVyc1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdXBkYXRlUGxheWVycyhpbywgYmF0dGxlSUQsIGJhdHRsZS5wbGF5ZXJzIGFzIGFueSBhcyBDYXNlQmF0dGxlUGxheWVycyk7XG5cbiAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoYmF0dGxlLnBsYXllcnMpLmZpbHRlcigocCkgPT4gcCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgYXdhaXQgZGIuY2FzZUJhdHRsZS5kZWxldGUoe1xuICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgaWQ6IGJhdHRsZUlEXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaW8udG8oYmF0dGxlSUQudG9TdHJpbmcoKSkuZW1pdCgncmVkaXJlY3QnLCAnY2FzZS1iYXR0bGUvbGlzdCcpO1xuICAgICAgICAgIGlvLmluKGJhdHRsZUlELnRvU3RyaW5nKCkpLmRpc2Nvbm5lY3RTb2NrZXRzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59O1xuXG5mdW5jdGlvbiB1cGRhdGVQbGF5ZXJzKGlvOiBTZXJ2ZXIsIGJhdHRsZUlEOiBudW1iZXIsIHBsYXllcnM6IENhc2VCYXR0bGVQbGF5ZXJzKSB7XG4gIGlvLnRvKGJhdHRsZUlELnRvU3RyaW5nKCkpLmVtaXQoJ2Nhc2VCYXR0bGVQbGF5ZXJVcGRhdGUnLCBwbGF5ZXJzKTtcbn1cbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiL2hvbWUvcHJvamVjdC9zcmMvbGliL3NlcnZlclwiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiL2hvbWUvcHJvamVjdC9zcmMvbGliL3NlcnZlci9kcm9wVG9JdGVtLnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9ob21lL3Byb2plY3Qvc3JjL2xpYi9zZXJ2ZXIvZHJvcFRvSXRlbS50c1wiO2ltcG9ydCB0eXBlIHsgQ2FzZURyb3AgfSBmcm9tICckbGliL3R5cGVzJztcbmltcG9ydCB7IG5hbm9pZCB9IGZyb20gJ25hbm9pZCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSXRlbUFkZE9iamVjdCB7XG4gIGRyb3BJZDogc3RyaW5nO1xuICBvcmlnaW46IHN0cmluZztcbiAgZHJvcERhdGU6IERhdGU7XG4gIGdsb2JhbEludkl0ZW06IHtcbiAgICBjb25uZWN0OiB7XG4gICAgICBpZDogc3RyaW5nO1xuICAgIH07XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkcm9wc1RvSXRlbXMoZHJvcHM6IENhc2VEcm9wW10sIG9yaWdpbjogc3RyaW5nKTogSXRlbUFkZE9iamVjdFtdIHtcbiAgcmV0dXJuIGRyb3BzLm1hcCgoZHJvcCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBkcm9wSWQ6IG5hbm9pZCgpLFxuICAgICAgb3JpZ2luOiBvcmlnaW4sXG4gICAgICBkcm9wRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgIGdsb2JhbEludkl0ZW06IHtcbiAgICAgICAgY29ubmVjdDoge1xuICAgICAgICAgIGlkOiBkcm9wLmdsb2JhbEludklEXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9KSBhcyBJdGVtQWRkT2JqZWN0W107XG59XG4iLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIi9ob21lL3Byb2plY3Qvc3JjL2xpYi9zZXJ2ZXJcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIi9ob21lL3Byb2plY3Qvc3JjL2xpYi9zZXJ2ZXIvZGIudHNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL2hvbWUvcHJvamVjdC9zcmMvbGliL3NlcnZlci9kYi50c1wiOy8qIGVzbGludC1kaXNhYmxlIGluZGVudCAqL1xuaW1wb3J0IHR5cGUgeyBDYXNlV2l0aERyb3BzLCBJdGVtV2l0aEdsb2JhbCB9IGZyb20gJyRsaWIvdHlwZXMnO1xuaW1wb3J0IHsgUHJpc21hQ2xpZW50LCB0eXBlIENhc2UsIHR5cGUgVXNlciB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcblxubGV0IHByaXNtYTogUHJpc21hQ2xpZW50O1xuXG5pZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgICBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KCk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFnbG9iYWwucHJpc21hKSB7XG4gICAgICBnbG9iYWwucHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpO1xuICAgIH1cbiAgICBwcmlzbWEgPSBnbG9iYWwucHJpc21hO1xuICB9XG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbi8vIEB0cy1pZ25vcmVcbmV4cG9ydCBjb25zdCBkYiA9IHByaXNtYTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVzZXJGcm9tU2Vzc2lvbklEKHNlc3Npb25JRDogc3RyaW5nLCBpbmNsdWRlSW52ZW50b3J5ID0gZmFsc2UpIHtcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGRiLnNlc3Npb24uZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiBzZXNzaW9uSURcbiAgICB9XG4gIH0pO1xuICBpZiAoIXNlc3Npb24pIHJldHVybiBudWxsO1xuICBjb25zdCB1c2VyID0gYXdhaXQgZGIudXNlci5maW5kVW5pcXVlKHtcbiAgICB3aGVyZToge1xuICAgICAgaWQ6IHNlc3Npb24/LnVzZXJJZFxuICAgIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgaW52ZW50b3J5OiBpbmNsdWRlSW52ZW50b3J5XG4gICAgICAgID8ge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICBnbG9iYWxJbnZJdGVtOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICA6IGZhbHNlXG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHVzZXIgYXMgVXNlciAmIHsgaW52ZW50b3J5PzogSXRlbVdpdGhHbG9iYWxbXSB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FzZURhdGEoY2FzZU5hbWU6IHN0cmluZykge1xuICBjb25zdCBjYXNlT2JqID1cbiAgICBjYXNlTmFtZSA9PT0gJ3NlY3Rpb25zJ1xuICAgICAgPyBhd2FpdCBkYi5jYXNlU2VjdGlvbi5maW5kTWFueSh7XG4gICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgY2FzZXM6IHtcbiAgICAgICAgICAgICAgb3JkZXJCeToge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uSW5HcmlkOiAnYXNjJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvcmRlckJ5OiB7XG4gICAgICAgICAgICBwb3NpdGlvbjogJ2FzYydcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICA6IGF3YWl0IGRiLmNhc2UuZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgT1I6IFt7IHVybE5hbWU6IGNhc2VOYW1lIH0sIHsgd2Vic2l0ZU5hbWU6IGNhc2VOYW1lIH1dXG4gICAgICAgICAgfSxcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICBkcm9wczogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gIHJldHVybiBjYXNlT2JqIGFzIENhc2VXaXRoRHJvcHMgfCBDYXNlW10gfCBudWxsO1xufVxuIiwgImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCIvaG9tZS9wcm9qZWN0L3NyYy9saWIvc2VydmVyXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCIvaG9tZS9wcm9qZWN0L3NyYy9saWIvc2VydmVyL3BhcnNlQ2FzZUJhdHRsZS50c1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vaG9tZS9wcm9qZWN0L3NyYy9saWIvc2VydmVyL3BhcnNlQ2FzZUJhdHRsZS50c1wiO2ltcG9ydCB0eXBlIHsgQ2FzZUJhdHRsZSwgQ2FzZURyb3AsIFBhcnNlZENhc2VCYXR0bGUgfSBmcm9tICckbGliL3R5cGVzJztcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi9kYic7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwYXJzZUNhc2VCYXR0bGUoXG4gIGJhdHRsZTogQ2FzZUJhdHRsZSxcbiAgcGFyc2VEcm9wczogYm9vbGVhbixcbiAgcGFyc2VXb25JdGVtczogYm9vbGVhblxuKTogUHJvbWlzZTxQYXJzZWRDYXNlQmF0dGxlPiB7XG4gIGNvbnN0IHBhcnNlZEJhdHRsZTogUGFyc2VkQ2FzZUJhdHRsZSA9IGJhdHRsZSBhcyBhbnk7XG5cbiAgaWYgKHBhcnNlRHJvcHMpIHtcbiAgICBjb25zdCBtZW1vOiBNYXA8c3RyaW5nLCBDYXNlRHJvcD4gPSBuZXcgTWFwKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiYXR0bGUucGxheWVyQ291bnQ7IGkrKykge1xuICAgICAgY29uc3QgcGFyc2VkSXRlbXM6IENhc2VEcm9wW11bXSA9IFtdO1xuICAgICAgY29uc3QgYmF0dGxlQ2FzZURyb3BzOiBzdHJpbmdbXVtdID0gYmF0dGxlLmRyb3BzIVtpXSBhcyBhbnk7XG4gICAgICBmb3IgKGNvbnN0IElEcyBvZiBiYXR0bGVDYXNlRHJvcHMpIHtcbiAgICAgICAgY29uc3QgaXRlbXM6IENhc2VEcm9wW10gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBpZCBvZiBJRHMpIHtcbiAgICAgICAgICBpZiAobWVtby5oYXMoaWQpKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG1lbW8uZ2V0KGlkKSEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtOiBDYXNlRHJvcCA9IChhd2FpdCBkYi5jYXNlRHJvcC5maW5kRmlyc3Qoe1xuICAgICAgICAgICAgICB3aGVyZTogeyBpZDogaWQgfVxuICAgICAgICAgICAgfSkpIGFzIGFueTtcbiAgICAgICAgICAgIG1lbW8uc2V0KGlkLCBpdGVtKTtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHBhcnNlZEl0ZW1zLnB1c2goaXRlbXMgYXMgYW55IGFzIENhc2VEcm9wW10pO1xuICAgICAgfVxuICAgICAgcGFyc2VkQmF0dGxlLmRyb3BzW2ldID0gcGFyc2VkSXRlbXM7XG4gICAgfVxuICAgIG1lbW8uY2xlYXIoKTtcbiAgfSBlbHNlIGlmIChwYXJzZVdvbkl0ZW1zKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiYXR0bGUucGxheWVyQ291bnQ7IGkrKykge1xuICAgICAgY29uc3QgSURzOiBzdHJpbmdbXSA9IGJhdHRsZS53b25JdGVtc1tpXTtcbiAgICAgIGNvbnN0IGl0ZW1zOiBDYXNlRHJvcFtdID0gKGF3YWl0IGRiLiR0cmFuc2FjdGlvbihcbiAgICAgICAgSURzLm1hcCgoaWQpID0+XG4gICAgICAgICAgZGIuY2FzZURyb3AuZmluZEZpcnN0KHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBpZCB9XG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgKSkgYXMgYW55O1xuICAgICAgcGFyc2VkQmF0dGxlLndvbkl0ZW1zW2ldID0gaXRlbXM7XG4gICAgfVxuICB9XG4gIHJldHVybiBwYXJzZWRCYXR0bGU7XG59XG4iXSwKICAibWFwcGluZ3MiOiAiO0FBQXlOLFNBQVMsaUJBQWlCO0FBQ25QLE9BQU8sVUFBVTs7O0FDU2pCLFNBQVMsZ0JBQUFBLHFCQUErQjtBQUN4QyxTQUFTLGlCQUFpQjtBQUMxQixTQUFTLGNBQWM7OztBQ1h2QixTQUFTLGNBQWM7QUFhaEIsU0FBUyxhQUFhLE9BQW1CLFFBQWlD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QU07QUFBQSxjQUNKLE9BQU87QUFBQSxZQUNUO0FBQUEsVUFDRixDQUFDO0FBQ0QsYUFBRyxHQUFHLFNBQVMsU0FBUyxDQUFDLEVBQUUsS0FBSyx5QkFBeUIsVUFBVTtBQUFBLFFBQ3JFO0FBR0EsZUFBTyxRQUFRLFFBQVEsSUFBSTtBQUMzQixjQUFNQSxJQUFHLFdBQVcsT0FBTztBQUFBLFVBQ3pCLE9BQU87QUFBQSxZQUNMLElBQUk7QUFBQSxVQUNOO0FBQUEsVUFDQSxNQUFNO0FBQUEsWUFDSixTQUFTLE9BQU87QUFBQSxVQUNsQjtBQUFBLFFBQ0YsQ0FBQztBQUVELHNCQUFjLElBQUksVUFBVSxPQUFPLE9BQW1DO0FBRXRFLFlBQUksT0FBTyxPQUFPLE9BQU8sT0FBTyxFQUFFLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxXQUFXLEdBQUc7QUFDL0QsZ0JBQU1BLElBQUcsV0FBVyxPQUFPO0FBQUEsWUFDekIsT0FBTztBQUFBLGNBQ0wsSUFBSTtBQUFBLFlBQ047QUFBQSxVQUNGLENBQUM7QUFDRCxhQUFHLEdBQUcsU0FBUyxTQUFTLENBQUMsRUFBRSxLQUFLLFlBQVksa0JBQWtCO0FBQzlELGFBQUcsR0FBRyxTQUFTLFNBQVMsQ0FBQyxFQUFFLGtCQUFrQjtBQUFBLFFBQy9DO0FBQUEsTUFDRixDQUFDO0FBQUEsSUFDSCxDQUFDO0FBQUEsRUFDSDtBQUNGO0FBRUEsU0FBUyxjQUFjLElBQVksVUFBa0IsU0FBNEI7QUFDL0UsS0FBRyxHQUFHLFNBQVMsU0FBUyxDQUFDLEVBQUUsS0FBSywwQkFBMEIsT0FBTztBQUNuRTs7O0FEaFNBLElBQU0sU0FBcUI7QUFBQSxFQUN6QixTQUFTLENBQUMsVUFBVSxHQUFHLGVBQWU7QUFBQSxFQUN0QyxTQUFTO0FBQUEsSUFDUCxPQUFPO0FBQUEsTUFDTCxhQUFhLEtBQUssUUFBUSxnQkFBZ0I7QUFBQSxNQUMxQyxTQUFTLEtBQUssUUFBUSxRQUFRO0FBQUEsTUFDOUIsU0FBUyxLQUFLLFFBQVEsWUFBWTtBQUFBLE1BQ2xDLGVBQWUsS0FBSyxRQUFRLGdCQUFnQjtBQUFBLElBQzlDO0FBQUEsSUFDQSxrQkFBa0I7QUFBQSxFQUNwQjtBQUFBLEVBQ0EsUUFBUTtBQUFBLElBQ04sSUFBSTtBQUFBLE1BQ0YsT0FBTyxDQUFDLElBQUk7QUFBQSxJQUNkO0FBQUEsRUFDRjtBQUNGO0FBRUEsSUFBTyxzQkFBUTsiLAogICJuYW1lcyI6IFsiUHJpc21hQ2xpZW50IiwgImRiIiwgIlByaXNtYUNsaWVudCJdCn0K
